<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>–ê–ª–∏–Ω–∞, —Å –¥–Ω—ë–º —Ä–æ–∂–¥–µ–Ω–∏—è! üíó</title>
  <meta name="description" content="–ù–µ–∂–Ω—ã–π –æ–¥–Ω–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω—ã–π —Å–∞–π—Ç-–ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è –ê–ª–∏–Ω—ã: –ø–∏—Å—å–º–æ, 26 –ø—Ä–∏—á–∏–Ω –ª—é–±–≤–∏, —Å–µ–∫—Ä–µ—Ç—ã, —Ñ–æ—Ç–æ –∏ –º–∏–Ω–∏-–∏–≥—Ä–∞." />

  <!-- Open Graph -->
  <meta property="og:type" content="website" />
  <meta property="og:title" content="–ê–ª–∏–Ω–∞, —Å –¥–Ω—ë–º —Ä–æ–∂–¥–µ–Ω–∏—è! üíó" />
  <meta property="og:description" content="–ü–∏—Å—å–º–æ, 26 –ø—Ä–∏—á–∏–Ω, —Å–µ–∫—Ä–µ—Ç—ã, —Ñ–æ—Ç–æ –∏ –º–∏–Ω–∏-–∏–≥—Ä–∞. –° –ª—é–±–æ–≤—å—é ‚Äî —Å–µ–≥–æ–¥–Ω—è –∏ –≤—Å–µ–≥–¥–∞." />
  <!-- –ï—Å–ª–∏ —Ö–æ—á–µ—à—å, –¥–æ–±–∞–≤—å –ø—Ä–µ–≤—å—é-–∫–∞—Ä—Ç–∏–Ω–∫—É –∏ —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π:
  <meta property="og:image" content="https://<your-domain>/assets/og.jpg" />
  -->

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@300;400;600;700&family=Playfair+Display:wght@500;700&display=swap" rel="stylesheet" />

  <style>
    :root{
      --bg0:#fff7f6;
      --bg1:#fff1f4;
      --card:#ffffffcc;
      --stroke:#ffffffaa;
      --text:#2b2b33;
      --muted:#6a6673;
      --accent:#ff6f9d;
      --accent2:#ffb199;
      --gold:#d7b46a;
      --shadow: 0 16px 48px rgba(20, 10, 30, .10);
      --shadow2: 0 10px 24px rgba(20, 10, 30, .08);
      --r-lg: 26px;
      --r-md: 18px;
      --r-sm: 14px;
      --max: 1100px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: Manrope, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--text);
      background:
        radial-gradient(1200px 700px at 15% 10%, rgba(255,111,157,.18), transparent 60%),
        radial-gradient(900px 650px at 85% 15%, rgba(215,180,106,.18), transparent 55%),
        radial-gradient(1100px 800px at 50% 95%, rgba(255,177,153,.18), transparent 60%),
        linear-gradient(180deg, var(--bg1), var(--bg0));
      overflow-x:hidden;
    }

    a{color:inherit}
    .wrap{max-width:var(--max); margin:0 auto; padding: 24px 18px 72px}

    /* Soft floating background hearts */
    .bg-hearts{
      position:fixed; inset:0;
      pointer-events:none;
      overflow:hidden;
      z-index:-1;
      opacity:.9;
    }
    .bg-hearts i{
      position:absolute;
      width: 18px; height: 18px;
      transform: rotate(45deg);
      border-radius: 6px;
      background: linear-gradient(135deg, rgba(255,111,157,.32), rgba(255,177,153,.20));
      filter: blur(.2px);
      animation: floatUp linear infinite;
    }
    .bg-hearts i::before,
    .bg-hearts i::after{
      content:"";
      position:absolute;
      width: 18px; height: 18px;
      border-radius: 50%;
      background: inherit;
    }
    .bg-hearts i::before{ left:-9px; top:0 }
    .bg-hearts i::after{ top:-9px; left:0 }
    @keyframes floatUp{
      0%{ transform: translateY(110vh) translateX(0) rotate(45deg); opacity:0 }
      10%{opacity:1}
      100%{ transform: translateY(-20vh) translateX(var(--drift)) rotate(45deg); opacity:0 }
    }

    /* Top */
    header{
      display:flex; align-items:center; justify-content:space-between;
      gap:12px;
      padding: 6px 0 10px;
    }
    .brand{
      display:flex; align-items:baseline; gap:10px;
      user-select:none;
    }
    .brand .mark{
      width:12px;height:12px;border-radius:999px;
      background: radial-gradient(circle at 30% 30%, #fff, rgba(255,111,157,.55) 35%, rgba(255,177,153,.55) 100%);
      box-shadow: 0 0 0 6px rgba(255,111,157,.10);
    }
    .brand strong{
      font-family: "Playfair Display", Georgia, serif;
      letter-spacing:.2px;
      font-weight:700;
    }
    .brand span{ color:var(--muted); font-size:14px }

    .pill{
      display:inline-flex; align-items:center; gap:8px;
      padding:10px 12px;
      border-radius:999px;
      background: rgba(255,255,255,.55);
      border:1px solid rgba(255,255,255,.7);
      box-shadow: var(--shadow2);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      font-size: 13px;
      color: var(--muted);
      user-select:none;
      white-space:nowrap;
    }
    .pill b{ color:var(--text); font-weight:700 }

    /* Sections */
    section{ margin-top: 18px; }
    .card{
      background: var(--card);
      border: 1px solid rgba(255,255,255,.75);
      border-radius: var(--r-lg);
      box-shadow: var(--shadow);
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
      overflow:hidden;
    }
    .card-inner{ padding: 26px 22px; }

    .hero{
      position:relative;
      padding: 18px;
    }
    .hero-grid{
      display:grid;
      grid-template-columns: 1.2fr .8fr;
      gap: 18px;
      align-items:stretch;
    }
    @media (max-width: 880px){
      .hero-grid{ grid-template-columns:1fr; }
    }

    .hero h1{
      margin: 6px 0 10px;
      font-family: "Playfair Display", Georgia, serif;
      font-size: clamp(34px, 4.2vw, 56px);
      line-height: 1.05;
      letter-spacing: .2px;
    }
    .hero p.lead{
      margin: 0 0 18px;
      font-size: 16.5px;
      color: var(--muted);
      line-height: 1.6;
      max-width: 62ch;
    }

    .hero-badge{
      display:inline-flex; align-items:center; gap:10px;
      padding: 10px 12px;
      border-radius: 14px;
      background: rgba(255,255,255,.65);
      border: 1px solid rgba(255,255,255,.75);
      box-shadow: var(--shadow2);
      margin: 6px 0 14px;
    }
    .hero-badge .dot{
      width:10px;height:10px;border-radius:99px;
      background: radial-gradient(circle at 30% 30%, #fff, rgba(255,111,157,.75));
      box-shadow: 0 0 0 5px rgba(255,111,157,.10);
    }
    .hero-badge b{ font-weight:800 }
    .hero-badge span{ color:var(--muted) }

    .count{
      display:grid;
      grid-template-columns: repeat(4, minmax(0,1fr));
      gap: 10px;
      margin-top: 10px;
    }
    .count .tile{
      padding: 14px 12px;
      border-radius: var(--r-md);
      background: rgba(255,255,255,.7);
      border: 1px solid rgba(255,255,255,.8);
      box-shadow: var(--shadow2);
      text-align:center;
    }
    .count .num{
      font-size: clamp(20px, 2.8vw, 28px);
      font-weight: 800;
      letter-spacing:.2px;
    }
    .count .lbl{
      margin-top:4px;
      font-size: 12px;
      color: var(--muted);
    }

    .actions{
      display:flex; flex-wrap:wrap;
      gap: 10px;
      margin-top: 16px;
      align-items:center;
    }
    .btn{
      appearance:none;
      border:0;
      border-radius: 999px;
      padding: 12px 16px;
      font-weight: 800;
      font-size: 14px;
      cursor:pointer;
      transition: transform .15s ease, box-shadow .15s ease, background .15s ease;
      user-select:none;
    }
    .btn:active{ transform: translateY(1px) }
    .btn-primary{
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      color: #fff;
      box-shadow: 0 14px 26px rgba(255,111,157,.28);
    }
    .btn-primary:hover{ box-shadow: 0 18px 34px rgba(255,111,157,.32) }
    .btn-ghost{
      background: rgba(255,255,255,.70);
      border: 1px solid rgba(255,255,255,.85);
      color: var(--text);
      box-shadow: var(--shadow2);
      font-weight: 750;
    }
    .btn-ghost:hover{ box-shadow: 0 16px 28px rgba(20,10,30,.10) }

    .hero-side{
      position:relative;
      min-height: 260px;
    }
    .hero-side .frame{
      height:100%;
      border-radius: var(--r-lg);
      background:
        radial-gradient(140px 120px at 30% 35%, rgba(255,111,157,.24), transparent 60%),
        radial-gradient(220px 160px at 70% 20%, rgba(215,180,106,.22), transparent 55%),
        radial-gradient(260px 200px at 50% 80%, rgba(255,177,153,.22), transparent 60%),
        linear-gradient(135deg, rgba(255,255,255,.65), rgba(255,255,255,.35));
      border: 1px solid rgba(255,255,255,.80);
      box-shadow: var(--shadow);
      overflow:hidden;
      display:flex;
      align-items:center;
      justify-content:center;
      padding: 18px;
    }
    .hero-side .quote{
      text-align:center;
      max-width: 30ch;
    }
    .hero-side .quote h3{
      margin:0 0 8px;
      font-family:"Playfair Display", Georgia, serif;
      font-size: 22px;
      letter-spacing:.2px;
    }
    .hero-side .quote p{
      margin:0;
      color: var(--muted);
      line-height:1.55;
      font-size: 14.5px;
    }
    .hero-side .ribbon{
      position:absolute;
      left:-60px; top:18px;
      transform: rotate(-10deg);
      background: rgba(255,255,255,.55);
      border:1px solid rgba(255,255,255,.7);
      box-shadow: var(--shadow2);
      padding: 10px 14px;
      border-radius: 999px;
      font-weight: 800;
      color: var(--text);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }

    /* Title blocks */
    .title{
      display:flex; align-items:baseline; justify-content:space-between;
      gap: 16px;
      padding: 6px 4px 14px;
    }
    .title h2{
      margin:0;
      font-family:"Playfair Display", Georgia, serif;
      font-size: clamp(22px, 2.4vw, 30px);
      letter-spacing:.2px;
    }
    .title p{
      margin:0;
      color:var(--muted);
      font-size: 13.5px;
    }

    /* Letter */
    .letter{
      position:relative;
    }
    .letter .paper{
      border-radius: var(--r-lg);
      padding: 24px 22px;
      background: rgba(255,255,255,.72);
      border:1px solid rgba(255,255,255,.82);
      box-shadow: var(--shadow2);
      overflow:hidden;
    }
    .letter .paper::before{
      content:"";
      position:absolute; inset:-1px;
      background:
        radial-gradient(240px 180px at 10% 15%, rgba(255,111,157,.18), transparent 60%),
        radial-gradient(250px 180px at 90% 20%, rgba(215,180,106,.16), transparent 55%),
        radial-gradient(300px 220px at 50% 95%, rgba(255,177,153,.16), transparent 60%);
      pointer-events:none;
      opacity:.9;
    }
    .letter .paper > *{ position:relative }
    .letter .txt{
      margin: 0;
      font-size: 16px;
      line-height: 1.85;
      color: #2a2730;
      white-space: pre-wrap;
    }
    .letter .sign{
      margin-top: 16px;
      font-weight: 800;
      letter-spacing:.2px;
    }
    .type-controls{
      display:flex; flex-wrap:wrap; gap:10px; align-items:center;
      margin-top: 14px;
    }
    .mini{
      font-size: 13px;
      color: var(--muted);
    }

    /* Reasons */
    .reasons-grid{
      display:grid;
      grid-template-columns: repeat(3, minmax(0,1fr));
      gap: 12px;
    }
    @media (max-width: 920px){ .reasons-grid{ grid-template-columns: repeat(2, minmax(0,1fr)); } }
    @media (max-width: 560px){ .reasons-grid{ grid-template-columns: 1fr; } }

    .reason{
      background: rgba(255,255,255,.70);
      border: 1px solid rgba(255,255,255,.82);
      border-radius: var(--r-md);
      padding: 14px 14px;
      box-shadow: var(--shadow2);
      min-height: 78px;
      display:flex;
      gap: 12px;
      align-items:flex-start;
    }
    .reason .n{
      width: 34px; height: 34px;
      border-radius: 12px;
      display:flex; align-items:center; justify-content:center;
      font-weight: 900;
      color: #fff;
      background: linear-gradient(135deg, rgba(255,111,157,.95), rgba(255,177,153,.95));
      box-shadow: 0 10px 18px rgba(255,111,157,.22);
      flex: 0 0 auto;
    }
    .reason p{
      margin: 0;
      color: #2b2b33;
      line-height: 1.55;
      font-size: 14.5px;
    }

    /* Accordion */
    .accordion{
      display:grid;
      grid-template-columns: repeat(2, minmax(0,1fr));
      gap: 12px;
    }
    @media (max-width: 860px){ .accordion{ grid-template-columns: 1fr; } }
    .acc{
      border-radius: var(--r-md);
      border: 1px solid rgba(255,255,255,.82);
      background: rgba(255,255,255,.72);
      box-shadow: var(--shadow2);
      overflow:hidden;
    }
    .acc button{
      width:100%;
      text-align:left;
      background:transparent;
      border:0;
      padding: 14px 14px;
      cursor:pointer;
      display:flex;
      gap: 12px;
      align-items:center;
      justify-content:space-between;
      font-family: inherit;
    }
    .acc .left{
      display:flex; flex-direction:column; gap:4px;
    }
    .acc .t{
      font-weight: 900;
      letter-spacing:.2px;
    }
    .acc .h{
      color: var(--muted);
      font-size: 13px;
      line-height:1.35;
    }
    .chev{
      width: 32px; height: 32px;
      border-radius: 12px;
      background: rgba(255,255,255,.70);
      border:1px solid rgba(255,255,255,.85);
      box-shadow: 0 10px 16px rgba(20,10,30,.06);
      display:flex; align-items:center; justify-content:center;
      transition: transform .18s ease;
      flex: 0 0 auto;
    }
    .acc[aria-expanded="true"] .chev{ transform: rotate(180deg) }
    .panel{
      max-height:0;
      overflow:hidden;
      transition: max-height .28s ease;
      border-top: 1px solid rgba(255,255,255,.60);
    }
    .panel .inner{
      padding: 12px 14px 16px;
      color: #2b2b33;
      line-height: 1.65;
      font-size: 14.5px;
    }

    /* Gallery */
    .gallery{
      display:grid;
      grid-template-columns: repeat(4, minmax(0,1fr));
      gap: 10px;
    }
    @media (max-width: 920px){ .gallery{ grid-template-columns: repeat(3, minmax(0,1fr)); } }
    @media (max-width: 620px){ .gallery{ grid-template-columns: repeat(2, minmax(0,1fr)); } }

    .ph{
      position:relative;
      border-radius: 18px;
      overflow:hidden;
      border: 1px solid rgba(255,255,255,.82);
      background:
        radial-gradient(120px 90px at 20% 20%, rgba(255,111,157,.20), transparent 60%),
        radial-gradient(160px 120px at 80% 30%, rgba(215,180,106,.18), transparent 60%),
        linear-gradient(135deg, rgba(255,255,255,.65), rgba(255,255,255,.35));
      box-shadow: var(--shadow2);
      aspect-ratio: 1 / 1;
      cursor:pointer;
      transition: transform .15s ease, box-shadow .15s ease;
      user-select:none;
    }
    .ph:hover{ transform: translateY(-1px); box-shadow: 0 16px 30px rgba(20,10,30,.10) }
    .ph img{
      width:100%; height:100%;
      object-fit: cover;
      display:block;
      opacity: 0;
      transition: opacity .25s ease;
    }
    .ph.loaded img{ opacity:1 }
    .ph .cap{
      position:absolute; left:10px; right:10px; bottom:10px;
      font-size: 12px;
      color: rgba(255,255,255,.95);
      padding: 8px 10px;
      border-radius: 14px;
      background: rgba(20,10,30,.20);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border: 1px solid rgba(255,255,255,.25);
      display:none;
    }
    .ph.placeholder .cap{
      display:block;
      color: rgba(60,45,70,.85);
      background: rgba(255,255,255,.65);
      border: 1px dashed rgba(255,111,157,.35);
    }

    /* Lightbox */
    .modal{
      position:fixed; inset:0;
      display:none;
      place-items:center;
      background: rgba(12, 8, 16, .55);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      z-index: 50;
      padding: 16px;
    }
    .modal.open{ display:grid; }
    .modal .box{
      width:min(980px, 100%);
      border-radius: 22px;
      background: rgba(255,255,255,.92);
      border: 1px solid rgba(255,255,255,.85);
      box-shadow: 0 24px 80px rgba(0,0,0,.25);
      overflow:hidden;
      position:relative;
    }
    .modal .top{
      display:flex; align-items:center; justify-content:space-between;
      gap: 10px;
      padding: 12px 12px;
      border-bottom: 1px solid rgba(30,20,45,.08);
      background: rgba(255,255,255,.65);
    }
    .modal .top .mcap{
      color: var(--muted);
      font-size: 13px;
    }
    .iconbtn{
      width: 40px; height: 40px;
      border-radius: 14px;
      border: 1px solid rgba(30,20,45,.10);
      background: rgba(255,255,255,.75);
      cursor:pointer;
      display:flex; align-items:center; justify-content:center;
      box-shadow: 0 10px 18px rgba(20,10,30,.08);
      transition: transform .15s ease, box-shadow .15s ease;
    }
    .iconbtn:hover{ box-shadow: 0 14px 24px rgba(20,10,30,.10) }
    .iconbtn:active{ transform: translateY(1px) }

    .modal .imgwrap{
      background: linear-gradient(135deg, rgba(255,111,157,.10), rgba(255,177,153,.08));
      display:flex;
      align-items:center;
      justify-content:center;
      min-height: min(70vh, 640px);
    }
    .modal img{
      max-width:100%;
      max-height: 75vh;
      display:block;
    }
    .modal .nav{
      position:absolute;
      inset: 0;
      pointer-events:none;
    }
    .modal .nav .prev,
    .modal .nav .next{
      position:absolute; top: 50%;
      transform: translateY(-50%);
      pointer-events:auto;
    }
    .modal .nav .prev{ left: 12px; }
    .modal .nav .next{ right: 12px; }

    /* Hug */
    .hug-row{
      display:flex; flex-wrap:wrap; gap: 12px;
      align-items:center;
      justify-content:space-between;
    }
    .hug-note{
      color: var(--muted);
      line-height:1.55;
      max-width: 60ch;
      margin: 0;
    }
    .hug-result{
      margin-top: 12px;
      display:none;
      padding: 12px 14px;
      border-radius: 16px;
      background: rgba(255,255,255,.72);
      border: 1px solid rgba(255,255,255,.85);
      box-shadow: var(--shadow2);
      color: #2b2b33;
      font-weight: 750;
    }
    .hug-result.show{ display:block; }

    /* Mini game */
    .game{
      display:grid;
      grid-template-columns: 1fr;
      gap: 12px;
    }
    .game-top{
      display:flex; flex-wrap:wrap; gap: 10px;
      align-items:center; justify-content:space-between;
    }
    .stats{
      display:flex; flex-wrap:wrap; gap: 10px;
      align-items:center;
    }
    .stat{
      padding: 10px 12px;
      border-radius: 14px;
      background: rgba(255,255,255,.70);
      border: 1px solid rgba(255,255,255,.85);
      box-shadow: var(--shadow2);
      font-weight: 800;
      color: #2b2b33;
      font-size: 13px;
    }
    .stat span{ color: var(--muted); font-weight: 650; margin-left:6px }
    .gamefield{
      position:relative;
      height: 360px;
      border-radius: var(--r-lg);
      overflow:hidden;
      border: 1px solid rgba(255,255,255,.82);
      background:
        radial-gradient(220px 160px at 20% 30%, rgba(255,111,157,.18), transparent 60%),
        radial-gradient(240px 180px at 85% 25%, rgba(215,180,106,.16), transparent 60%),
        radial-gradient(300px 220px at 60% 90%, rgba(255,177,153,.16), transparent 60%),
        linear-gradient(135deg, rgba(255,255,255,.65), rgba(255,255,255,.35));
      box-shadow: var(--shadow);
      touch-action: manipulation;
      user-select:none;
    }
    .gamefield .hint{
      position:absolute; inset:0;
      display:grid; place-items:center;
      text-align:center;
      padding: 16px;
      color: var(--muted);
      line-height: 1.55;
      font-weight: 650;
    }
    .heart{
      position:absolute;
      width: 34px; height: 34px;
      transform: rotate(45deg);
      border-radius: 10px;
      background: linear-gradient(135deg, rgba(255,111,157,.95), rgba(255,177,153,.95));
      box-shadow: 0 14px 26px rgba(255,111,157,.25);
      cursor:pointer;
      will-change: transform, top, left;
      animation: popIn .12s ease-out;
    }
    .heart::before, .heart::after{
      content:"";
      position:absolute;
      width: 34px; height: 34px;
      border-radius: 50%;
      background: inherit;
    }
    .heart::before{ left:-17px; top:0 }
    .heart::after{ top:-17px; left:0 }
    @keyframes popIn{
      from{ transform: rotate(45deg) scale(.85); opacity:.75 }
      to{ transform: rotate(45deg) scale(1); opacity:1 }
    }
    .heart.burst{
      animation: burst .18s ease-out forwards;
    }
    @keyframes burst{
      to{ transform: rotate(45deg) scale(1.35); opacity:0 }
    }
    .game-end{
      display:none;
      padding: 12px 14px;
      border-radius: 16px;
      background: rgba(255,255,255,.72);
      border: 1px solid rgba(255,255,255,.85);
      box-shadow: var(--shadow2);
      color: #2b2b33;
      line-height:1.55;
    }
    .game-end.show{ display:block; }

    footer{
      margin-top: 22px;
      text-align:center;
      color: var(--muted);
      font-size: 13.5px;
      padding: 14px 6px;
    }
    .date{
      display:inline-flex; align-items:center; gap:8px;
      padding: 10px 12px;
      border-radius: 999px;
      background: rgba(255,255,255,.62);
      border: 1px solid rgba(255,255,255,.82);
      box-shadow: var(--shadow2);
    }

    /* reveal on scroll */
    .reveal{ opacity:0; transform: translateY(10px); transition: opacity .45s ease, transform .45s ease; }
    .reveal.in{ opacity:1; transform: translateY(0); }

    /* Reduced motion */
    @media (prefers-reduced-motion: reduce){
      *{ scroll-behavior:auto !important; }
      .bg-hearts i{ animation:none !important; opacity:.15 }
      .reveal{ opacity:1 !important; transform:none !important; transition:none !important; }
      .heart{ animation:none !important; }
      .heart.burst{ animation:none !important; opacity:0 !important; }
      .panel{ transition:none !important; }
      .btn{ transition:none !important; }
    }
  </style>
</head>

<body>
  <div class="bg-hearts" aria-hidden="true" id="bgHearts"></div>

  <div class="wrap">
    <header>
      <div class="brand">
        <div class="mark" aria-hidden="true"></div>
        <strong>–î–ª—è –ê–ª–∏–Ω–∫–∏-–ª—é–±–∏–º–∫–∏</strong>
        <span></span>
      </div>
      <div class="pill" title="–°—á—ë—Ç—á–∏–∫ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏">
        üíû <span>–ú—ã –≤–º–µ—Å—Ç–µ —É–∂–µ:</span> <b id="togetherShort">‚Äî</b>
      </div>
    </header>

    <!-- HERO -->
    <section class="card hero reveal" id="top">
      <div class="card-inner">
        <div class="hero-grid">
          <div>
            <div class="hero-badge">
              <div class="dot" aria-hidden="true"></div>
              <div>
                <b>26.02.2026</b>
                <span>‚Äî —Ç–≤–æ–π –¥–µ–Ω—å</span>
              </div>
            </div>

            <h1>–ê–ª–∏–Ω–æ—á–∫–∞, —Å –¥–Ω—ë–º —Ä–æ–∂–¥–µ–Ω–∏—è! üíó</h1>
            <p class="lead">
              –ü—É—Å—Ç—å —ç—Ç–æ—Ç –¥–µ–Ω—å –±—É–¥–µ—Ç —Ç—ë–ø–ª—ã–º, –º—è–≥–∫–∏–º –∏ –∫—Ä–∞—Å–∏–≤—ã–º ‚Äî –∫–∞–∫ —Ç—ã.
              –ê –µ—â—ë –ø—É—Å—Ç—å –æ–Ω –Ω–∞–ø–æ–º–Ω–∏—Ç —Ç–µ–±–µ —Å–∞–º–æ–µ –≥–ª–∞–≤–Ω–æ–µ: —Ç—ã –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω–æ –∫—Ä–∞—Å–∏–≤–∞—è, –ª—é–±–∏–º–∞—è –∏ –∂–µ–ª–∞–Ω–Ω–∞—è!
            </p>

            <div class="count" aria-label="–°—á—ë—Ç—á–∏–∫ –≤—Ä–µ–º–µ–Ω–∏ –≤–º–µ—Å—Ç–µ">
              <div class="tile"><div class="num" id="d">‚Äî</div><div class="lbl">–¥–Ω–µ–π</div></div>
              <div class="tile"><div class="num" id="h">‚Äî</div><div class="lbl">—á–∞—Å–æ–≤</div></div>
              <div class="tile"><div class="num" id="m">‚Äî</div><div class="lbl">–º–∏–Ω—É—Ç</div></div>
              <div class="tile"><div class="num" id="s">‚Äî</div><div class="lbl">—Å–µ–∫—É–Ω–¥</div></div>
            </div>

            <div class="actions">
              <button class="btn btn-primary" id="toLetter">–û—Ç–∫—Ä—ã—Ç—å –ø–∏—Å—å–º–æ</button>
              <button class="btn btn-ghost" id="toGame">–ü–æ–∏–≥—Ä–∞—Ç—å üíû</button>
              <button class="btn btn-ghost" id="toPhotos">–ù–∞—à–∏ —Ñ–æ—Ç–æ</button>
            </div>
          </div>

          <div class="hero-side">
            <div class="ribbon"> –¢—ã. –ú–æ–π. –ò–¥–µ–∞–ª.</div>
            <div class="frame">
              <div class="quote">
                <h3>–° –î–ù–ï–ú –†–û–ñ–î–ï–ù–ò–Ø!!!</h3>
                <p>
                  –Ø —Å–æ–∑–¥–∞–ª —ç—Ç–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è —Ç–µ–±—è, —á—Ç–æ–±—ã –Ω–∞–ø–æ–º–Ω–∏—Ç—å
                   ‚Äî —Ç—ã –º–æ–π —Å–∞–º—ã–π –≥–ª–∞–≤–Ω—ã–π –≤—ã–±–æ—Ä –≤ –∂–∏–∑–Ω–∏!
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- LETTER -->
    <section class="reveal" id="letter">
      <div class="title">
        <div>
          <h2>–ü–∏—Å—å–º–æ</h2>
          <p>–î–ª—è –º–æ–µ–π –∫—Ä–∞—Å–∞–≤–∏—Ü—ã. –ß–∏—Å—Ç–æ –æ—Ç –¥—É—à–∏ –¥—É—à–µ–≤–Ω–æ –≤ –¥—É—à—É!</p>
        </div>
        <div class="pill">üíå <b>FOR YOU</b></div>
      </div>

      <div class="card letter">
        <div class="card-inner">
          <div class="paper">
            <p class="txt" id="letterText" aria-live="polite"></p>

            <div class="type-controls">
              <button class="btn btn-primary" id="toggleTyping">–ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é</button>
              <span class="mini" id="typingHint">–¢–µ–∫—Å—Ç –ø–æ—è–≤–ª—è–µ—Ç—Å—è –º—è–≥–∫–æ ‚Äî –Ω–æ –º–æ–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å —Å—Ä–∞–∑—É.</span>
            </div>

            <div class="sign">–¢–≤–æ–π Mr.Durzhinskiy</div>
          </div>
        </div>
      </div>
    </section>

    <!-- 26 REASONS -->
    <section class="reveal" id="reasons">
      <div class="title">
        <div>
          <h2>26 –ø—Ä–∏—á–∏–Ω, –ø–æ—á–µ–º—É —è –ª—é–±–ª—é —Ç–µ–±—è</h2>
        </div>
        <div class="pill">üíó <b>26</b> –º–∞–ª–µ–Ω—å–∫–∏—Ö –∫–æ–º–ø–ª–∏–º–µ–Ω—Ç–æ–≤</div>
      </div>

      <div class="card">
        <div class="card-inner">
          <div class="reasons-grid" id="reasonsGrid" aria-label="–°–ø–∏—Å–æ–∫ –ø—Ä–∏—á–∏–Ω"></div>
        </div>
      </div>
    </section>

    <!-- SECRETS / NOTES -->
    <section class="reveal" id="notes">
      <div class="title">
        <div>
          <h2>5 –º–∞–ª–µ–Ω—å–∫–∏—Ö —Å–µ–∫—Ä–µ—Ç–æ–≤</h2>
          <p>–ù–∞–∂–º–∏ ‚Äî –∏ –æ—Ç–∫—Ä–æ–π –∑–∞–ø–∏—Å–∫—É.</p>
        </div>
        <div class="pill">üîê <b>—Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–µ–±—è</b></div>
      </div>

      <div class="card">
        <div class="card-inner">
          <div class="accordion" id="accordion"></div>
        </div>
      </div>
    </section>

    <!-- PHOTOS -->
    <section class="reveal" id="photos">
      <div class="title">
        <div>
          <h2>–ù–∞—à–∏ –º–æ–º–µ–Ω—Ç—ã</h2>
        </div>
      </div>

      <div class="card">
        <div class="card-inner">
          <div class="gallery" id="gallery" aria-label="–ì–∞–ª–µ—Ä–µ—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π"></div>
        </div>
      </div>
    </section>

    <!-- HUG -->
    <section class="reveal" id="hug">
      <div class="title">
        <div>
          <h2>–û–ë–ú–ù–ò–ú–ê–®–ö–ò</h2>
          <p>–û–¥–∏–Ω –∫–ª–∏–∫ ‚Äî –∏ –Ω–µ–º–Ω–æ–≥–æ —Ç–µ–ø–ª–∞.</p>
        </div>
        <div class="pill">ü§ç <b>–Ø –¢–ï–ë–Ø –õ–Æ–ë–õ–Æ</b></div>
      </div>

      <div class="card">
        <div class="card-inner">
          <div class="hug-row">
            <p class="hug-note">
              –ö–æ–≥–¥–∞ —Å–ª–æ–∂–Ω–æ, –∫–æ–≥–¥–∞ —Ä–∞–¥–æ—Å—Ç–Ω–æ, –∫–æ–≥–¥–∞ –ø—Ä–æ—Å—Ç–æ —Ö–æ—á–µ—Ç—Å—è —Ç–∏—à–∏–Ω—ã ‚Äî —è —Ä—è–¥–æ–º.
              –õ—é–±–ª—é —Ç–µ–±—è –æ–±–Ω–∏–º–∞—Ç—å –∏  —Ç–≤–æ–∏ –æ–±–Ω–∏–º–∞—à–∫–∏. 
            </p>
            <button class="btn btn-primary" id="hugBtn">–û–±–Ω—è—Ç—å –ê–ª–∏–Ω—É</button>
          </div>
          <div class="hug-result" id="hugResult">–Ø —Ä—è–¥–æ–º. –í—Å–µ–≥–¥–∞.</div>
        </div>
      </div>
    </section>

    <!-- GAME -->
    <section class="reveal" id="game">
      <div class="title">
        <div>
          <h2>–ú–∏–Ω–∏-–∏–≥—Ä–∞: ‚Äú–ü–æ–π–º–∞–π —Å–µ—Ä–¥–µ—á–∫–∏‚Äù</h2>
          <p>–°–æ–±–µ—Ä–∏ –∫–∞–∫ –º–æ–∂–Ω–æ –±–æ–ª—å—à–µ –ª—é–±–≤–∏ –∑–∞ 30 —Å–µ–∫—É–Ω–¥.</p>
        </div>
        <div class="pill">üéÆ <b>—Ç–∞–ø/–∫–ª–∏–∫</b></div>
      </div>

      <div class="card">
        <div class="card-inner game">
          <div class="game-top">
            <div class="stats">
              <div class="stat">–û—á–∫–∏: <span id="score">0</span></div>
              <div class="stat">–í—Ä–µ–º—è: <span id="time">30</span>—Å</div>
              <div class="stat">–õ—É—á—à–∏–π: <span id="best">0</span></div>
            </div>
            <div class="actions">
              <button class="btn btn-primary" id="startGame">–°—Ç–∞—Ä—Ç</button>
              <button class="btn btn-ghost" id="restartGame" disabled>–°—ã–≥—Ä–∞—Ç—å –µ—â—ë</button>
            </div>
          </div>

          <div class="gamefield" id="field" aria-label="–ò–≥—Ä–æ–≤–æ–µ –ø–æ–ª–µ">
            <div class="hint" id="gameHint">
              –ù–∞–∂–º–∏ <b>–°—Ç–∞—Ä—Ç</b> ‚Äî —Å–µ—Ä–¥–µ—á–∫–∏ –Ω–∞—á–Ω—É—Ç –ø–∞–¥–∞—Ç—å.<br/>
              –õ–æ–≤–∏ –∏—Ö –∫–ª–∏–∫–æ–º (–∏–ª–∏ —Ç–∞–ø–æ–º) üíó
            </div>
          </div>

          <div class="game-end" id="gameEnd"></div>
        </div>
      </div>
    </section>

    <footer class="reveal">
      <div class="date">üíû <span>–° –ª—é–±–æ–≤—å—é, —Å–µ–≥–æ–¥–Ω—è –∏ –≤—Å–µ–≥–¥–∞</span> ¬∑ <b>26.02.2026</b></div>
      <div style="margin-top:10px;">–ü—É—Å—Ç—å —É —Ç–µ–±—è –±—É–¥–µ—Ç –±–æ–ª—å—à–µ —Ç–µ–ø–ª–∞, —á–µ–º –ø–æ–≤–æ–¥–æ–≤ –≥—Ä—É—Å—Ç–∏—Ç—å ‚Äî –∏ –±–æ–ª—å—à–µ —Å—á–∞—Å—Ç—å—è, —á–µ–º —Ç—ã —É—Å–ø–µ–µ—à—å —Å–æ—Å—á–∏—Ç–∞—Ç—å.</div>
    </footer>
  </div>

  <!-- Lightbox modal -->
  <div class="modal" id="modal" role="dialog" aria-modal="true" aria-label="–ü—Ä–æ—Å–º–æ—Ç—Ä —Ñ–æ—Ç–æ" aria-hidden="true">
    <div class="box" role="document">
      <div class="top">
        <div class="mcap" id="modalCap">–§–æ—Ç–æ</div>
        <div style="display:flex; gap:10px; align-items:center;">
          <button class="iconbtn" id="prevBtn" aria-label="–ü—Ä–µ–¥—ã–¥—É—â–µ–µ —Ñ–æ—Ç–æ">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <path d="M14.5 5L7.5 12L14.5 19" stroke="#2b2b33" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
          <button class="iconbtn" id="nextBtn" aria-label="–°–ª–µ–¥—É—é—â–µ–µ —Ñ–æ—Ç–æ">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <path d="M9.5 5L16.5 12L9.5 19" stroke="#2b2b33" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
          <button class="iconbtn" id="closeBtn" aria-label="–ó–∞–∫—Ä—ã—Ç—å">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <path d="M6 6L18 18M18 6L6 18" stroke="#2b2b33" stroke-width="2.2" stroke-linecap="round"/>
            </svg>
          </button>
        </div>
      </div>
      <div class="imgwrap">
        <img id="modalImg" alt="–§–æ—Ç–æ" />
      </div>

      <div class="nav" aria-hidden="true">
        <button class="iconbtn prev" id="prevBtn2" aria-label="–ü—Ä–µ–¥—ã–¥—É—â–µ–µ —Ñ–æ—Ç–æ (–¥—É–±–ª–∏—Ä—É—é—â–∞—è –∫–Ω–æ–ø–∫–∞)">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
            <path d="M14.5 5L7.5 12L14.5 19" stroke="#2b2b33" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
        <button class="iconbtn next" id="nextBtn2" aria-label="–°–ª–µ–¥—É—é—â–µ–µ —Ñ–æ—Ç–æ (–¥—É–±–ª–∏—Ä—É—é—â–∞—è –∫–Ω–æ–ø–∫–∞)">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
            <path d="M9.5 5L16.5 12L9.5 19" stroke="#2b2b33" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
      </div>
    </div>
  </div>

  <script>
    // =========================
    // Helpers
    // =========================
    const $ = (sel, root=document) => root.querySelector(sel);
    const $$ = (sel, root=document) => Array.from(root.querySelectorAll(sel));
    const pad2 = (n) => String(n).padStart(2,"0");

    // Respect reduced motion
    const reduceMotion = window.matchMedia && window.matchMedia("(prefers-reduced-motion: reduce)").matches;

    // =========================
    // Background hearts (light)
    // =========================
    (function initBgHearts(){
      const box = $("#bgHearts");
      if(!box) return;

      const count = reduceMotion ? 10 : 22;
      const w = window.innerWidth;
      for(let i=0;i<count;i++){
        const el = document.createElement("i");
        const left = Math.random()*100;
        const size = 12 + Math.random()*18;
        const dur = 12 + Math.random()*16;
        const delay = Math.random()*-dur;
        const drift = (Math.random()*140 - 70).toFixed(0) + "px";
        el.style.left = left + "vw";
        el.style.width = size + "px";
        el.style.height = size + "px";
        el.style.setProperty("--drift", drift);
        el.style.animationDuration = dur + "s";
        el.style.animationDelay = delay + "s";
        el.style.opacity = (0.22 + Math.random()*0.25).toFixed(2);
        box.appendChild(el);
      }
    })();

    // =========================
    // Together counter
    // =========================
    const togetherFrom = new Date("2024-08-26T00:00:00"); // local time
    function updateTogether(){
      const now = new Date();
      let diff = Math.max(0, now - togetherFrom);

      const days = Math.floor(diff / (1000*60*60*24));
      diff -= days * (1000*60*60*24);
      const hours = Math.floor(diff / (1000*60*60));
      diff -= hours * (1000*60*60);
      const mins = Math.floor(diff / (1000*60));
      diff -= mins * (1000*60);
      const secs = Math.floor(diff / 1000);

      $("#d").textContent = days;
      $("#h").textContent = pad2(hours);
      $("#m").textContent = pad2(mins);
      $("#s").textContent = pad2(secs);

      $("#togetherShort").textContent = `${days}–¥ ${pad2(hours)}:${pad2(mins)}:${pad2(secs)}`;
    }
    updateTogether();
    setInterval(updateTogether, 1000);

    // Smooth scroll buttons
    $("#toLetter").addEventListener("click", () => $("#letter").scrollIntoView({behavior:"smooth", block:"start"}));
    $("#toGame").addEventListener("click", () => $("#game").scrollIntoView({behavior:"smooth", block:"start"}));
    $("#toPhotos").addEventListener("click", () => $("#photos").scrollIntoView({behavior:"smooth", block:"start"}));

    // =========================
    // Letter with optional typing
    // =========================
    const fullLetter =
`–õ—é–±–∏–º–∞—è,

—Å –¥–Ω—ë–º —Ä–æ–∂–¥–µ–Ω–∏—è. –°–µ–≥–æ–¥–Ω—è –º–Ω–µ —Ö–æ—á–µ—Ç—Å—è —Å–∫–∞–∑–∞—Ç—å —Ç–µ–±–µ –Ω–µ ‚Äú–≤ —Ü–µ–ª–æ–º‚Äù, –∞ –ø–æ-–Ω–∞—Å—Ç–æ—è—â–µ–º—É ‚Äî —Ç–∞–∫, —á—Ç–æ–±—ã —Ç—ã –ø–æ—á—É–≤—Å—Ç–≤–æ–≤–∞–ª–∞: —Ç–µ–±—è –≤–∏–¥—è—Ç, —Ç–µ–±—è —Ü–µ–Ω—è—Ç –∏ —Ç–µ–±—è –ª—é–±—è—Ç.

–¢—ã —É–º–µ–µ—à—å –¥–µ–ª–∞—Ç—å –º–∏—Ä –º—è–≥—á–µ. –î–∞–∂–µ –∫–æ–≥–¥–∞ –≤–æ–∫—Ä—É–≥ —à—É–º, —Å–ø–µ—à–∫–∞ –∏ –º–Ω–æ–≥–æ –¥–µ–ª ‚Äî —Ä—è–¥–æ–º —Å —Ç–æ–±–æ–π –ø–æ—è–≤–ª—è–µ—Ç—Å—è –æ—â—É—â–µ–Ω–∏–µ, —á—Ç–æ –≤—Å—ë –Ω–∞ —Å–≤–æ—ë–º –º–µ—Å—Ç–µ. –¢—ã –Ω–µ –æ–±—è–∑–∞–Ω–∞ –±—ã—Ç—å –∏–¥–µ–∞–ª—å–Ω–æ–π, —Å–∏–ª—å–Ω–æ–π –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É –∏–ª–∏ ‚Äú—É—Å–ø–µ–≤–∞—Ç—å –≤—Å—ë‚Äù. –¢—ã —É–∂–µ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ. –¢—ã ‚Äî –Ω–∞—Å—Ç–æ—è—â–∞—è. –ò —ç—Ç–∏–º —Ç—ã –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ –∫—Ä–∞—Å–∏–≤–∞.

–ú–Ω–µ –Ω—Ä–∞–≤–∏—Ç—Å—è, –∫–∞–∫ —Ç—ã —É–º–µ–µ—à—å —Ä–∞–¥–æ–≤–∞—Ç—å—Å—è –º–µ–ª–æ—á–∞–º –∏ –∫–∞–∫ –±–µ—Ä–µ–∂–Ω–æ –æ—Ç–Ω–æ—Å–∏—à—å—Å—è –∫ –≤–∞–∂–Ω–æ–º—É. –ö–∞–∫ –≤ —Ç–µ–±–µ —Å–æ—á–µ—Ç–∞—é—Ç—Å—è –Ω–µ–∂–Ω–æ—Å—Ç—å –∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä. –ö–∞–∫ —Ç—ã –º–æ–∂–µ—à—å –±—ã—Ç—å –ª—ë–≥–∫–æ–π ‚Äî –∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω–æ –≥–ª—É–±–æ–∫–æ–π. –° —Ç–æ–±–æ–π —Ö–æ—á–µ—Ç—Å—è –±—ã—Ç—å –ª—É—á—à–µ –Ω–µ –∏–∑-–∑–∞ ‚Äú–Ω–∞–¥–æ‚Äù, –∞ –ø–æ—Ç–æ–º—É —á—Ç–æ —Ä—è–¥–æ–º —Å —Ç–æ–±–æ–π —Ö–æ—á–µ—Ç—Å—è –±–µ—Ä–µ—á—å, –∑–∞–±–æ—Ç–∏—Ç—å—Å—è, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å —á—Ç–æ-—Ç–æ —Å–≤–µ—Ç–ª–æ–µ.

–Ø —Ö–æ—á—É, —á—Ç–æ–±—ã —ç—Ç–æ—Ç –≥–æ–¥ –ø—Ä–∏–Ω—ë—Å —Ç–µ–±–µ –±–æ–ª—å—à–µ —Å–ø–æ–∫–æ–π—Å—Ç–≤–∏—è –≤–Ω—É—Ç—Ä–∏, –±–æ–ª—å—à–µ —Ç—ë–ø–ª—ã—Ö —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π, –±–æ–ª—å—à–µ ‚Äú–≤–æ—Ç –æ–Ω–æ!‚Äù –∏ –º–µ–Ω—å—à–µ —Å–æ–º–Ω–µ–Ω–∏–π. –ß—Ç–æ–±—ã —Ä—è–¥–æ–º –±—ã–ª–∏ –ª—é–¥–∏ –∏ —Å–æ–±—ã—Ç–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã–±–∏—Ä–∞—é—Ç —Ç–µ–±—è —Ç–∞–∫ –∂–µ –∏—Å–∫—Ä–µ–Ω–Ω–µ, –∫–∞–∫ —è –≤—ã–±–∏—Ä–∞—é.

–ò –µ—â—ë ‚Äî —è —Ö–æ—á—É, —á—Ç–æ–±—ã —Ç—ã –ø–æ–º–Ω–∏–ª–∞: —Ç—ã –º–æ–∂–µ—à—å –æ–ø–∏—Ä–∞—Ç—å—Å—è –Ω–∞ –º–µ–Ω—è. –í —Ä–∞–¥–æ—Å—Ç–∏, –≤ —É—Å—Ç–∞–ª–æ—Å—Ç–∏, –≤ —Ç–∏—à–∏–Ω–µ, –≤ –ø–ª–∞–Ω–∞—Ö –∏ –≤ –º–µ—á—Ç–∞—Ö. –Ø –Ω–µ –æ–±–µ—â–∞—é –∏–¥–µ–∞–ª—å–Ω—É—é —Å–∫–∞–∑–∫—É ‚Äî —è –æ–±–µ—â–∞—é –±—ã—Ç—å —Ä—è–¥–æ–º. –°–ª—É—à–∞—Ç—å. –î–µ—Ä–∂–∞—Ç—å –∑–∞ —Ä—É–∫—É. –£–ª—ã–±–∞—Ç—å—Å—è –≤–º–µ—Å—Ç–µ. –ò –ª—é–±–∏—Ç—å —Ç–µ–±—è —Ç–∞–∫, –∫–∞–∫ —Ç—ã —ç—Ç–æ–≥–æ –∑–∞—Å–ª—É–∂–∏–≤–∞–µ—à—å: –Ω–µ–∂–Ω–æ, –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ –∏ –ø–æ-–Ω–∞—Å—Ç–æ—è—â–µ–º—É.

–° –¥–Ω—ë–º —Ä–æ–∂–¥–µ–Ω–∏—è, –º–æ—è –ª—é–±–∏–º–∞—è. –ü—É—Å—Ç—å —É —Ç–µ–±—è –±—É–¥–µ—Ç –º–Ω–æ–≥–æ –ø–æ–≤–æ–¥–æ–≤ —É–ª—ã–±–∞—Ç—å—Å—è ‚Äî –≤–µ–¥—å —è —Ç–∞–∫ –ª—é–±–ª—é —Ç–≤–æ—é —É–ª—ã–±–∫—É!`;

    const letterEl = $("#letterText");
    const typingBtn = $("#toggleTyping");
    const typingHint = $("#typingHint");

    let typingOn = !reduceMotion; // disable typing on reduced motion by default
    let typingTimer = null;
    let typedIndex = 0;
    let typingDone = false;

    function renderLetterInstant(){
      clearInterval(typingTimer);
      letterEl.textContent = fullLetter;
      typedIndex = fullLetter.length;
      typingDone = true;
      typingBtn.textContent = "–ü–æ–∫–∞–∑–∞—Ç—å —Å –ø–µ—á–∞—Ç—å—é";
      typingHint.textContent = "–ú–æ–∂–Ω–æ –≤–∫–ª—é—á–∏—Ç—å –º—è–≥–∫—É—é –ø–µ—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ.";
    }

    function startTyping(){
      clearInterval(typingTimer);
      letterEl.textContent = "";
      typedIndex = 0;
      typingDone = false;
      typingBtn.textContent = "–ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é";
      typingHint.textContent = "–¢–µ–∫—Å—Ç –ø–æ—è–≤–ª—è–µ—Ç—Å—è –º—è–≥–∫–æ ‚Äî –Ω–æ –º–æ–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å —Å—Ä–∞–∑—É.";

      const speed = 14; // ms per char tick base
      typingTimer = setInterval(() => {
        // Add 2‚Äì4 chars per tick for smoother speed
        const step = 2 + Math.floor(Math.random()*3);
        typedIndex = Math.min(fullLetter.length, typedIndex + step);
        letterEl.textContent = fullLetter.slice(0, typedIndex);

        if(typedIndex >= fullLetter.length){
          clearInterval(typingTimer);
          typingDone = true;
          typingBtn.textContent = "–ü–æ–∫–∞–∑–∞—Ç—å —Å –ø–µ—á–∞—Ç—å—é";
          typingHint.textContent = "–ì–æ—Ç–æ–≤–æ. –ï—Å–ª–∏ —Ö–æ—á–µ—à—å ‚Äî –º–æ–∂–Ω–æ ‚Äú–Ω–∞–ø–µ—á–∞—Ç–∞—Ç—å‚Äù —Å–Ω–æ–≤–∞.";
        }
      }, speed);
    }

    // Initial
    if(typingOn) startTyping(); else renderLetterInstant();

    typingBtn.addEventListener("click", () => {
      if(!typingDone){
        renderLetterInstant();
      } else {
        // restart typing
        typingOn = true;
        startTyping();
      }
    });

    // =========================
    // Reasons (26)
    // =========================
    const reasons = [
      "–ó–∞ —Ç–æ, —á—Ç–æ —Ä—è–¥–æ–º —Å —Ç–æ–±–æ–π –º–∏—Ä —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Ç–∏—à–µ –∏ –¥–æ–±—Ä–µ–µ ‚Äî –±—É–¥—Ç–æ –∫—Ç–æ-—Ç–æ —É–±–∞–≤–∏–ª –≥—Ä–æ–º–∫–æ—Å—Ç—å —Å—É–µ—Ç—ã.",
      "–ó–∞ —Ç–≤–æ—é —É–ª—ã–±–∫—É, –∫–æ—Ç–æ—Ä–∞—è —É–º–µ–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –º–µ–Ω—è ‚Äú–¥–æ–º–æ–π‚Äù –¥–∞–∂–µ –≤ —Å–∞–º—ã–π –æ–±—ã—á–Ω—ã–π –¥–µ–Ω—å.",
      "–ó–∞ —Ç–æ, –∫–∞–∫ —Ç—ã —É–º–µ–µ—à—å –±—ã—Ç—å –Ω–µ–∂–Ω–æ–π",
      "–ó–∞ —Ç–≤–æ–∏ –∫—Ä–∞—Å–∏–≤—ã–µ –≥–ª–∞–∑–∞",
      "–ó–∞ —Ç–≤–æ—é –∏—Å–∫—Ä–µ–Ω–Ω–æ—Å—Ç—å",
      "–ó–∞ —Ç–æ, –∫–∞–∫ —Ç—ã —É–º–µ–µ—à—å –∑–∞–±–æ—Ç–∏—Ç—å—Å—è",
      "–ó–∞ —Ç–≤–æ–π —Å–º–µ—Ö ‚Äî –æ–Ω –¥–µ–ª–∞–µ—Ç –ª—é–±—ã–µ —Å—Ç–µ–Ω—ã –º—è–≥—á–µ, –∞ –≤–æ–∑–¥—É—Ö –ª–µ–≥—á–µ.",
      "–ó–∞ —Ç–æ, —á—Ç–æ —Ç—ã —É–º–µ–µ—à—å –≤–¥–æ—Ö–Ω–æ–≤–ª—è—Ç—å",
      "–ó–∞ —Ç–≤–æ—é –∂–µ–Ω—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å",
      "–ó–∞ —Ç–≤–æ–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä: —Ç—ã —É–º–µ–µ—à—å –≥–æ–≤–æ—Ä–∏—Ç—å ‚Äú–Ω–µ—Ç‚Äù –∏ –ø—Ä–∏ —ç—Ç–æ–º –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è –¥—É—à–∫–æ–π.",
      "–ó–∞ —Ç–≤–æ—é –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫ –º–µ–ª–æ—á–∞–º, –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –∏ —Å–∫–ª–∞–¥—ã–≤–∞–µ—Ç—Å—è –Ω–∞—Å—Ç–æ—è—â–∞—è –±–ª–∏–∑–æ—Å—Ç—å.",
      "–ó–∞ —Ç–æ, –∫–∞–∫ –∫—Ä–∞—Å–∏–≤–æ —Ç—ã —É–º–µ–µ—à—å —Ä–∞–¥–æ–≤–∞—Ç—å—Å—è",
      "–ó–∞ —Ç–≤–æ—é —Å–º–µ–ª–æ—Å—Ç—å –±—ã—Ç—å —Å–æ–±–æ–π, –¥–∞–∂–µ –∫–æ–≥–¥–∞ –ø—Ä–æ—â–µ –±—ã–ª–æ –±—ã —Å–ø—Ä—è—Ç–∞—Ç—å—Å—è.",
      "–ó–∞ —Ç–≤–æ—é –∑–∞–±–æ—Ç—É –æ –º–∏—Ä–µ –≤–æ–∫—Ä—É–≥ ‚Äî –æ–Ω–∞ —á—É–≤—Å—Ç–≤—É–µ—Ç—Å—è –≤ –∫–∞–∂–¥–æ–º —Ç–≤–æ—ë–º –¥–µ–π—Å—Ç–≤–∏–∏.",
      "–ó–∞ —Ç–≤–æ–∏ –≥–ª–∞–∑–∞ —É—Ç—Ä–æ–º ‚Äî –∫–æ–≥–¥–∞ –µ—â—ë –≤—Å—ë –≤–ø–µ—Ä–µ–¥–∏, –∏ —Ç—ã –æ—Å–æ–±–µ–Ω–Ω–æ –Ω–∞—Å—Ç–æ—è—â–∞—è.",
      "–ó–∞ —Ç–æ, —á—Ç–æ —Ç—ã —É–º–µ–µ—à—å –ø—Ä–µ–≤—Ä–∞—â–∞—Ç—å ‚Äú–ø—Ä–æ—Å—Ç–æ –≤–µ—á–µ—Ä‚Äù –≤ –±–ª–æ–∫–±–∞—Å—Ç–µ—Ä —É—Ä–æ–≤–Ω—è  Netflix",
      "–ó–∞ —Ç–≤–æ—é –Ω–µ–∂–Ω–æ—Å—Ç—å –≤ –ø—Ä–∏–∫–æ—Å–Ω–æ–≤–µ–Ω–∏—è—Ö.",
      "–ó–∞ —Ç–æ, –∫–∞–∫ —Ç—ã —É–º–µ–µ—à—å —Å–ª—É—à–∞—Ç—å",
      "–ó–∞ —Ç–≤–æ—é –¥–æ–±—Ä–æ—Ç—É",
      "–ó–∞ —Ç–≤–æ—é –∫—Ä–∞—Å–æ—Ç—É ‚Äî –∏ –≤–Ω–µ—à–Ω—é—é –∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω—é—é.",
      "–ó–∞ —Ç–æ, —á—Ç–æ —Ç—ã —É–º–µ–µ—à—å –≤–µ—Ä–∏—Ç—å –≤ —Ö–æ—Ä–æ—à–µ–µ ‚Äî –∏ —ç—Ç–∏–º —É—á–∏—à—å –º–µ–Ω—è —Ç–æ–∂–µ.",
      "–ó–∞ —Ç–≤–æ–π —É—é—Ç: —Ä—è–¥–æ–º —Å —Ç–æ–±–æ–π —Ö–æ—á–µ—Ç—Å—è —Å—Ç—Ä–æ–∏—Ç—å, –±–µ—Ä–µ—á—å –∏ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å—Å—è.",
      "–ó–∞ —Ç–æ, —á—Ç–æ —Å —Ç–æ–±–æ–π —Ö–æ—á–µ—Ç—Å—è –±—ã—Ç—å –ª—É—á—à–µ",
      "–ó–∞ —Ç–µ–±—è –∫–æ–ª—ã–º –æ—Ç–¥–∞–º",
      "–ó–∞ —Ç–≤–æ—é —Å–µ–∫—Å—É–∞–ª—å–Ω–æ—Å—Ç—å, –¥–∞–∂–µ –∫–æ–≥–¥–∞ –ø—Ä–æ—Å—Ç–æ –µ—à—å –º–æ—Ä–æ–∂–µ–Ω–Ω–æ–µ",
      "–ó–∞ —Ç–æ, —á—Ç–æ —Ç—ã ‚Äî –º–æ–π –≤—ã–±–æ—Ä. –ö–∞–∂–¥—ã–π –¥–µ–Ω—å. –°–Ω–æ–≤–∞ –∏ —Å–Ω–æ–≤–∞."
    ];

    const reasonsGrid = $("#reasonsGrid");
    reasons.forEach((text, idx) => {
      const item = document.createElement("div");
      item.className = "reason";
      item.innerHTML = `<div class="n">${idx+1}</div><p>${text}</p>`;
      reasonsGrid.appendChild(item);
    });

    // =========================
    // Accordion notes (5)
    // =========================
    const notes = [
      {
        title: "–°–µ–∫—Ä–µ—Ç ‚Ññ1",
        hint: "–ü—Ä–æ —Ç–æ, —á—Ç–æ —è –¥—É–º–∞—é —á–∞—â–µ, —á–µ–º –≥–æ–≤–æ—Ä—é‚Ä¶",
        body: "–ò–Ω–æ–≥–¥–∞ —è –ø—Ä–æ—Å—Ç–æ —Å–º–æ—Ç—Ä—é –Ω–∞ —Ç–µ–±—è –∏ –ª–æ–≤–ª—é —Å–µ–±—è –Ω–∞ –º—ã—Å–ª–∏: ‚Äú–í–æ—Ç –æ–Ω–æ. –≠—Ç–æ —Ç–æ —Å–∞–º–æ–µ.‚Äù "
      },
      {
        title: "–°–µ–∫—Ä–µ—Ç ‚Ññ2",
        hint: "–ü—Ä–æ –ø–æ–¥–¥–µ—Ä–∂–∫—É –±–µ–∑ –ª–∏—à–Ω–∏—Ö —Å–ª–æ–≤‚Ä¶",
        body: "–ï—Å–ª–∏ —É —Ç–µ–±—è –±—É–¥–µ—Ç —Ç—è–∂—ë–ª—ã–π –¥–µ–Ω—å ‚Äî –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –æ–±—ä—è—Å–Ω—è—Ç—å –≤—Å—ë –ø–æ–¥—Ä–æ–±–Ω–æ. –ú–æ–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ –≤–º–µ—Å—Ç–µ —Å–æ–∂—Ä–∞—Ç—å –≤–µ–¥—Ä–æ –º–æ—Ä–æ–∂–µ–Ω–Ω–æ–≥–æ"
      },
      {
        title: "–°–µ–∫—Ä–µ—Ç ‚Ññ3",
        hint: "–ü—Ä–æ –±—É–¥—É—â–µ–µ, –∫–æ—Ç–æ—Ä–æ–µ —Ö–æ—á–µ—Ç—Å—è —Å—Ç—Ä–æ–∏—Ç—å‚Ä¶",
        body: "–ú–Ω–µ –Ω—Ä–∞–≤–∏—Ç—Å—è –¥—É–º–∞—Ç—å –æ ‚Äú–Ω–∞—Å‚Äù –Ω–µ –∫–∞–∫ –æ –º–æ–º–µ–Ω—Ç–µ, –∞ –∫–∞–∫ –æ –ø—É—Ç–∏. –û –º–∞–ª–µ–Ω—å–∫–∏—Ö –ø—Ä–∏–≤—ã—á–∫–∞—Ö, –ø–ª–∞–Ω–∞—Ö, –ø–æ–µ–∑–¥–∫–∞—Ö, –¥–æ–º–µ –≤ –≥–æ–ª–æ–≤–µ –∏ –≤ —Å–µ—Ä–¥—Ü–µ."
      },
      {
        title: "–°–µ–∫—Ä–µ—Ç ‚Ññ4",
        hint: "–ü—Ä–æ –Ω–µ–∂–Ω–æ—Å—Ç—å, –∫–æ—Ç–æ—Ä–∞—è —Å–∏–ª—å–Ω–µ–µ —Å—É–µ—Ç—ã‚Ä¶",
        body: "–Ø –ª—é–±–ª—é –≤ —Ç–µ–±–µ –Ω–µ —Ç–æ–ª—å–∫–æ —è—Ä–∫–æ–µ ‚Äî —è –ª—é–±–ª—é —Ç–≤–æ–∏ —Ç–∏—Ö–∏–µ —Å—Ç–æ—Ä–æ–Ω—ã: –º—è–≥–∫–æ—Å—Ç—å, –∑–∞–¥—É–º—á–∏–≤–æ—Å—Ç—å, —Ç–≤–æ—é –≥–ª—É–±–∏–Ω—É –∏ —Ç–≤–æ—é —Ç—ë–ø–ª—É—é —á–µ—Å—Ç–Ω–æ—Å—Ç—å."
      },
      {
        title: "–°–µ–∫—Ä–µ—Ç ‚Ññ5",
        hint: "–ü—Ä–æ ‚Äú—è —Ä—è–¥–æ–º‚Äù ‚Äî –≤—Å–µ–≥–¥–∞‚Ä¶",
        body: "–Ø –Ω–µ –æ–±–µ—â–∞—é –∏–¥–µ–∞–ª—å–Ω—ã—Ö –¥–Ω–µ–π. –Ø –æ–±–µ—â–∞—é –±—ã—Ç—å —á–µ–ª–æ–≤–µ–∫–æ–º, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–≥–æ –º–æ–∂–Ω–æ –æ–ø–µ—Ä–µ—Ç—å—Å—è: –¥–µ—Ä–∂–∞—Ç—å, –±–µ—Ä–µ—á—å, —É–≤–∞–∂–∞—Ç—å –∏ –ª—é–±–∏—Ç—å —Ç–µ–±—è –ø–æ-–Ω–∞—Å—Ç–æ—è—â–µ–º—É."
      }
    ];

    const accRoot = $("#accordion");
    notes.forEach((n, i) => {
      const acc = document.createElement("div");
      acc.className = "acc";
      acc.setAttribute("aria-expanded", "false");

      const btn = document.createElement("button");
      btn.type = "button";
      btn.setAttribute("aria-controls", `panel-${i}`);
      btn.setAttribute("id", `acc-${i}`);
      btn.innerHTML = `
        <div class="left">
          <div class="t">${n.title}</div>
          <div class="h">${n.hint}</div>
        </div>
        <div class="chev" aria-hidden="true">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
            <path d="M6 9L12 15L18 9" stroke="#2b2b33" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
      `;

      const panel = document.createElement("div");
      panel.className = "panel";
      panel.id = `panel-${i}`;
      panel.setAttribute("role", "region");
      panel.setAttribute("aria-labelledby", `acc-${i}`);
      panel.innerHTML = `<div class="inner">${n.body}</div>`;

      const toggle = () => {
        const expanded = acc.getAttribute("aria-expanded") === "true";
        acc.setAttribute("aria-expanded", String(!expanded));
        if(!expanded){
          panel.style.maxHeight = panel.scrollHeight + "px";
        } else {
          panel.style.maxHeight = "0px";
        }
      };

      btn.addEventListener("click", toggle);
      btn.addEventListener("keydown", (e) => {
        if(e.key === "Enter" || e.key === " "){
          e.preventDefault();
          toggle();
        }
      });

      acc.appendChild(btn);
      acc.appendChild(panel);
      accRoot.appendChild(acc);
    });

    // Make panels correct on resize (if open)
    window.addEventListener("resize", () => {
      $$(".acc").forEach(acc => {
        const expanded = acc.getAttribute("aria-expanded")==="true";
        const panel = $(".panel", acc);
        if(expanded) panel.style.maxHeight = panel.scrollHeight + "px";
      });
    });

    // =========================
    // Gallery with graceful fallback
    // =========================
    const gallery = $("#gallery");
    const photos = Array.from({length:12}, (_,i)=> {
      const n = String(i+1).padStart(2,"0");
      return {
        src: `assets/photo${n}.jpg`,
        alt: `–ù–∞—à–µ —Ñ–æ—Ç–æ ${i+1}`,
        cap: `–§–æ—Ç–æ ${i+1}`
      };
    });

    let currentIndex = 0;
    const modal = $("#modal");
    const modalImg = $("#modalImg");
    const modalCap = $("#modalCap");

    function openModal(idx){
      currentIndex = idx;
      const p = photos[currentIndex];
      modalImg.src = p.src;
      modalImg.alt = p.alt;
      modalCap.textContent = `${p.cap} ¬∑ ${currentIndex+1} / ${photos.length}`;
      modal.classList.add("open");
      modal.setAttribute("aria-hidden","false");
      // focus for accessibility
      $("#closeBtn").focus();
    }

    function closeModal(){
      modal.classList.remove("open");
      modal.setAttribute("aria-hidden","true");
      modalImg.src = "";
    }

    function nav(dir){
      currentIndex = (currentIndex + dir + photos.length) % photos.length;
      const p = photos[currentIndex];
      modalImg.src = p.src;
      modalImg.alt = p.alt;
      modalCap.textContent = `${p.cap} ¬∑ ${currentIndex+1} / ${photos.length}`;
    }

    function buildGallery(){
      photos.forEach((p, idx) => {
        const cell = document.createElement("div");
        cell.className = "ph";
        cell.setAttribute("role","button");
        cell.setAttribute("tabindex","0");
        cell.setAttribute("aria-label", `–û—Ç–∫—Ä—ã—Ç—å ${p.alt}`);

        const img = document.createElement("img");
        img.loading = "lazy";
        img.decoding = "async";
        img.alt = p.alt;
        img.src = p.src;

        const cap = document.createElement("div");
        cap.className = "cap";
        cap.textContent = p.cap;

        img.addEventListener("load", () => {
          cell.classList.add("loaded");
          cell.classList.remove("placeholder");
          cap.style.display = "none";
        });

        img.addEventListener("error", () => {
          cell.classList.add("placeholder");
          cap.style.display = "block";
          cap.textContent = "–î–æ–±–∞–≤—å —Ñ–æ—Ç–æ –≤ assets/ (photo01.jpg ‚Ä¶ photo12.jpg)";
        });

        const open = () => openModal(idx);
        cell.addEventListener("click", open);
        cell.addEventListener("keydown", (e) => {
          if(e.key === "Enter" || e.key === " "){
            e.preventDefault();
            open();
          }
        });

        cell.appendChild(img);
        cell.appendChild(cap);
        gallery.appendChild(cell);
      });
    }
    buildGallery();

    // Modal events
    $("#closeBtn").addEventListener("click", closeModal);
    $("#prevBtn").addEventListener("click", () => nav(-1));
    $("#nextBtn").addEventListener("click", () => nav(1));
    $("#prevBtn2").addEventListener("click", () => nav(-1));
    $("#nextBtn2").addEventListener("click", () => nav(1));

    modal.addEventListener("click", (e) => {
      if(e.target === modal) closeModal();
    });

    window.addEventListener("keydown", (e) => {
      if(!modal.classList.contains("open")) return;
      if(e.key === "Escape") closeModal();
      if(e.key === "ArrowLeft") nav(-1);
      if(e.key === "ArrowRight") nav(1);
    });

    // =========================
    // Hug: hearts burst (light)
    // =========================
    const hugBtn = $("#hugBtn");
    const hugResult = $("#hugResult");

    function spawnHeartsBurst(x, y, count=18){
      const root = document.body;
      for(let i=0;i<count;i++){
        const el = document.createElement("div");
        el.className = "heart";
        el.style.position = "fixed";
        el.style.left = (x + (Math.random()*20-10)) + "px";
        el.style.top = (y + (Math.random()*20-10)) + "px";
        const scale = 0.6 + Math.random()*0.7;
        el.style.transform = `rotate(45deg) scale(${scale})`;
        el.style.opacity = "1";
        el.style.pointerEvents = "none";
        el.style.zIndex = 60;

        root.appendChild(el);

        const vx = (Math.random()*2-1) * (70 + Math.random()*90);
        const vy = -(120 + Math.random()*140);
        const rot = (Math.random()*40 - 20);
        const life = 700 + Math.random()*450;

        const start = performance.now();
        const sx = x, sy = y;

        const tick = (t) => {
          const p = Math.min(1, (t - start)/life);
          // ease out
          const eout = 1 - Math.pow(1-p, 3);
          const nx = sx + vx * eout;
          const ny = sy + vy * eout + (p*p)*200; // gravity
          const a = 1 - p;
          el.style.left = nx + "px";
          el.style.top = ny + "px";
          el.style.opacity = a.toFixed(2);
          el.style.transform = `rotate(${45+rot*eout}deg) scale(${scale*(1+0.15*eout)})`;
          if(p < 1){
            requestAnimationFrame(tick);
          } else {
            el.remove();
          }
        };
        if(!reduceMotion) requestAnimationFrame(tick);
        else el.remove();
      }
    }

    hugBtn.addEventListener("click", (e) => {
      const r = hugBtn.getBoundingClientRect();
      const x = r.left + r.width/2;
      const y = r.top + r.height/2;
      spawnHeartsBurst(x, y, reduceMotion ? 0 : 20);
      hugResult.classList.add("show");
      hugResult.textContent = "–Ø —Ä—è–¥–æ–º. –í—Å–µ–≥–¥–∞.";
      setTimeout(() => hugResult.classList.remove("show"), 4200);
    });

    // =========================
    // Mini game: catch hearts
    // =========================
    const field = $("#field");
    const hint = $("#gameHint");
    const scoreEl = $("#score");
    const timeEl = $("#time");
    const bestEl = $("#best");
    const endEl = $("#gameEnd");
    const startBtn = $("#startGame");
    const restartBtn = $("#restartGame");

    const BEST_KEY = "alina_hearts_best_v1";
    let best = Number(localStorage.getItem(BEST_KEY) || 0);
    bestEl.textContent = best;

    let playing = false;
    let score = 0;
    let timeLeft = 30;
    let spawnTimer = null;
    let gameTimer = null;
    let fallRaf = null;
    const hearts = new Set();

    function resetGameUI(){
      score = 0;
      timeLeft = 30;
      scoreEl.textContent = "0";
      timeEl.textContent = "30";
      endEl.classList.remove("show");
      endEl.textContent = "";
      hint.style.display = "grid";
      restartBtn.disabled = true;
    }

    function createFallingHeart(){
      const el = document.createElement("div");
      el.className = "heart";
      const fw = field.clientWidth;
      const x = Math.random() * (fw - 44) + 10;
      el.style.left = x + "px";
      el.style.top = "-50px";
      const speed = 70 + Math.random()*140; // px/s
      el.dataset.speed = String(speed);
      el.dataset.y = "-50";

      const click = (e) => {
        e.preventDefault();
        if(!playing) return;
        score += 1;
        scoreEl.textContent = String(score);
        el.classList.add("burst");
        setTimeout(() => removeHeart(el), 160);
      };
      el.addEventListener("click", click, {passive:false});
      el.addEventListener("touchstart", click, {passive:false});

      field.appendChild(el);
      hearts.add(el);
      return el;
    }

    function removeHeart(el){
      if(hearts.has(el)){
        hearts.delete(el);
        el.remove();
      }
    }

    function clearHearts(){
      hearts.forEach(el => el.remove());
      hearts.clear();
    }

    function startGame(){
      if(playing) return;
      playing = true;
      resetGameUI();
      hint.style.display = "none";
      startBtn.disabled = true;
      restartBtn.disabled = true;

      // spawn loop
      const spawnEvery = reduceMotion ? 850 : 520;
      spawnTimer = setInterval(() => {
        if(!playing) return;
        // cap amount on screen
        if(hearts.size < (reduceMotion ? 6 : 10)) createFallingHeart();
      }, spawnEvery);

      // countdown timer
      gameTimer = setInterval(() => {
        if(!playing) return;
        timeLeft -= 1;
        timeEl.textContent = String(timeLeft);
        if(timeLeft <= 0){
          endGame();
        }
      }, 1000);

      // falling animation
      let last = performance.now();
      const step = (now) => {
        if(!playing) return;
        const dt = (now - last) / 1000;
        last = now;

        const fh = field.clientHeight;

        hearts.forEach(el => {
          const y = parseFloat(el.dataset.y || "0") + parseFloat(el.dataset.speed || "120") * dt;
          el.dataset.y = String(y);
          el.style.top = y + "px";

          if(y > fh + 60){
            removeHeart(el);
          }
        });

        fallRaf = requestAnimationFrame(step);
      };
      fallRaf = requestAnimationFrame(step);
    }

    function endGame(){
      if(!playing) return;
      playing = false;

      clearInterval(spawnTimer);
      clearInterval(gameTimer);
      if(fallRaf) cancelAnimationFrame(fallRaf);

      // clean
      setTimeout(clearHearts, 180);

      // best
      if(score > best){
        best = score;
        localStorage.setItem(BEST_KEY, String(best));
        bestEl.textContent = String(best);
      }

      startBtn.disabled = false;
      restartBtn.disabled = false;

      const msg =
        score >= 35 ? "–¢–µ–±–µ –ø–æ—Ä–∞ –≤ –∫–∏–±–µ—Ä—Å–ø–æ—Ä—Ç üíó" :
        score >= 22 ? "–í–æ—Ç —ç—Ç–æ —É–∂–µ –Ω–∏—Ö—É—è —Å–µ–±–µ " :
        score >= 12 ? "–î–∞, —ç—Ç–æ –∂–µ—Å—Ç–∫–æ" :
                      "–ü–æ–ø—Ä–æ–±—É–π –µ—â–µ —Ä–∞–∑. –¢—ã –≤—Å–µ —Ç–∞–∫–∏ –ë–æ–≥ –∏–Ω–≤–æ–∫–µ—Ä–∞";

      endEl.classList.add("show");
      endEl.innerHTML =
        `<b>–†–∞—É–Ω–¥ –∑–∞–≤–µ—Ä—à—ë–Ω!</b><br/>–¢—ã –Ω–∞–±—Ä–∞–ª–∞ —Å—Ç–æ–ª—å–∫–æ –ª—é–±–≤–∏: <b>${score}</b> üíó<br/><span style="color:#6a6673">${msg}</span>`;
    }

    startBtn.addEventListener("click", startGame);
    restartBtn.addEventListener("click", () => {
      endEl.classList.remove("show");
      endEl.textContent = "";
      startGame();
    });

    // =========================
    // Reveal on scroll
    // =========================
    (function initReveal(){
      const items = $$(".reveal");
      if(reduceMotion){
        items.forEach(el => el.classList.add("in"));
        return;
      }
      const io = new IntersectionObserver((entries) => {
        entries.forEach(en => {
          if(en.isIntersecting){
            en.target.classList.add("in");
            io.unobserve(en.target);
          }
        });
      }, {threshold: 0.12});
      items.forEach(el => io.observe(el));
    })();

    // =========================
    // Extra: keep scrolling smooth if allowed
    // =========================
    if(!reduceMotion){
      document.documentElement.style.scrollBehavior = "smooth";
    }

    // Handy anchors from hero
    $("#toPhotos").addEventListener("click", () => $("#photos").scrollIntoView({behavior:"smooth"}));
  </script>

  <!--
  =========================
  –ò–ù–°–¢–†–£–ö–¶–ò–Ø
  =========================
  1) –°–æ–∑–¥–∞–π —Ä—è–¥–æ–º —Å index.html –ø–∞–ø–∫—É: assets
  2) –ü–æ–ª–æ–∂–∏ —Ç—É–¥–∞ 12 —Ñ–æ—Ç–æ JPG —Å –∏–º–µ–Ω–∞–º–∏:
     photo01.jpg, photo02.jpg, ... photo12.jpg
     (–ø—É—Ç—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å: assets/photo01.jpg –∏ —Ç.–¥.)
  3) –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫:
     –ø—Ä–æ—Å—Ç–æ –æ—Ç–∫—Ä–æ–π index.html –¥–≤–æ–π–Ω—ã–º –∫–ª–∏–∫–æ–º –≤ –±—Ä–∞—É–∑–µ—Ä–µ.
  4) GitHub Pages:
     - —Å–æ–∑–¥–∞–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
     - –∑–∞–ª–µ–π index.html –∏ –ø–∞–ø–∫—É assets/
     - –≤–∫–ª—é—á–∏ Pages –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è (Deploy from branch)
  5) –ö–∞–∫ –ø–æ–º–µ–Ω—è—Ç—å —Ç–µ–∫—Å—Ç—ã:
     - –ü–∏—Å—å–º–æ: –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è fullLetter –≤ <script>
     - 26 –ø—Ä–∏—á–∏–Ω: –º–∞—Å—Å–∏–≤ reasons –≤ <script>
     - 5 —Å–µ–∫—Ä–µ—Ç–æ–≤: –º–∞—Å—Å–∏–≤ notes –≤ <script>
  -->
</body>
</html>